# Известные проблемы

## Почтовый парсер незаметно подменяет данные тестовыми _(исправлено в odyssey-of-omis)_
- Файл: project_package/project/mail_checker.py
- Статус: режим `auto` больше не переключается на тестовые письма, вместо этого добавлен явный выбор backend (`OMIS_OUTLOOK_BACKEND`, `--backend`, `--mail-backend`). Тестовый режим включается только флагами `--fake` / `--fake-mail`.
- Рекомендация: при развёртывании обновить конфигурацию и установить `pywin32`, если планируется использовать COM-подключение.

## CLI-скрипты пропускают инициализацию базы
- Файлы: project_package/runner.py, project_package/scenario_runner.py
- Проблема: скрипты не вызывают `database.init_db()`. На чистой установке они падают с `sqlite3.OperationalError: no such table: requests`, пока кто-то не зайдёт во Flask-приложение.
- Как исправить: инициализировать схему при старте (или вынести общий helper, который это делает перед основной логикой).

## Фильтр просроченных заявок сравнивает с «битым» статусом
- Файл: project_package/project/database.py:302-312
- Проблема: `get_delayed_requests` сравнивает `status != "????????? ????"`, из-за чего фильтр не исключает базовый статус, а docstring нечитаем.
- Как исправить: заменить мусорную строку на фактический базовый статус (например, `DEFAULT_STATUS`) и восстановить текст в docstring.
