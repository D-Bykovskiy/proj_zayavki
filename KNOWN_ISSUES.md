# Известные проблемы

## Почтовый парсер незаметно подменяет данные тестовыми
- Файл: project_package/project/mail_checker.py:263-279
- Проблема: при любой ошибке Outlook (нет доступа или настроек) код возвращает `FAKE_CONTRACTOR_MESSAGES`. Если в продакшене запустить раннер без `--fake-mail`, тестовые письма попадут в базу и скроют реальную ошибку интеграции.
- Как исправить: при промахе Outlook явно завершать работу с ошибкой, а режим тестовых писем включать только по явному флагу.

## CLI-скрипты пропускают инициализацию базы
- Файлы: project_package/runner.py, project_package/scenario_runner.py
- Проблема: скрипты не вызывают `database.init_db()`. На чистой установке они падают с `sqlite3.OperationalError: no such table: requests`, пока кто-то не зайдёт во Flask-приложение.
- Как исправить: инициализировать схему при старте (или вынести общий helper, который это делает перед основной логикой).

## Фильтр просроченных заявок сравнивает с «битым» статусом
- Файл: project_package/project/database.py:302-312
- Проблема: `get_delayed_requests` сравнивает `status != "????????? ????"`, из-за чего фильтр не исключает базовый статус, а docstring нечитаем.
- Как исправить: заменить мусорную строку на фактический базовый статус (например, `DEFAULT_STATUS`) и восстановить текст в docstring.
